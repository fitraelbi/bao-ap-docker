


server {
  listen       [::]:80;
  listen       80;
  server_name  _;
  # Compression
  gzip         on;
  gzip_types   application/json application/javascript text/javascript text/css text/plain;

  # Includes for the default hostname
  include  default.d/*.conf;

  # Includes for the default hostname under HTTPS
  include  default.d/*-https.inc;

  # https://developer.mozilla.org/en-US/docs/Web/HTTP/X-Frame-Options
  add_header  X-Frame-Options DENY;

  # https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP
  add_header  Content-Security-Policy "frame-ancestors 'none';";

  # Enable Strict Transport Security (HSTS) for https
  add_header Strict-Transport-Security "max-age=31536000" always;

  # Proxy settings
  proxy_set_header         host               $http_host;
  proxy_set_header         x-forwarded-host   $host;
  proxy_set_header         x-real-ip          $remote_addr;
  proxy_set_header         x-forwarded-for    $proxy_add_x_forwarded_for;
  proxy_set_header         x-forwarded-proto  $scheme;
  proxy_set_header         x-forwarded-port   $server_port;

  proxy_buffer_size        128k;
  proxy_buffers            8 128k;
  proxy_busy_buffers_size  256k;

  location / {
    proxy_pass             http://superset:8088;
    proxy_set_header         host               $http_host;
    proxy_set_header         x-forwarded-host   $host;
    proxy_set_header         x-real-ip          $remote_addr;
    proxy_set_header         x-forwarded-for    $proxy_add_x_forwarded_for;
    proxy_set_header         x-forwarded-proto  $scheme;
    proxy_set_header         x-forwarded-port   $server_port;
 }


}
